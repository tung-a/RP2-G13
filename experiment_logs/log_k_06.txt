Comando executado: C:\Users\ktama\AppData\Local\Microsoft\WindowsApps\PythonSoftwareFoundation.Python.3.12_qbz5n2kfra8p0\python.exe c:\Users\ktama\OneDrive\Área de Trabalho\Lanem\RP2\RP2-G13\RP2-G13\src\main.py -s --k_privada 6 --k_publica 6
Iniciado em: 2025-11-15 12:29:10
================================================================================

--- SAÍDA PADRÃO (STDOUT) ---

--- Iniciando Etapa 1: Carregando DataFrames de Amostra (CSV) ---
AVISO: As colunas 'duracao_ideal_anos' ou 'tempo_permanencia' n�o foram encontradas para a an�lise comparativa.

--- Processando Dados para Institui��es do Tipo: PUBLICA ---
--- Etapa 3A: Pr�-processando dados para K-Prototypes (publica) ---
For�ando colunas conhecidas para 'category' em df_prep...
--- Etapa 3B: Treinando K-Prototypes (k=6) para 'publica' ---

Iniciando K-Prototypes com 6 clusters...
Clusteriza��o conclu�da.
Salvando modelo em models\kmeans_model_publica.joblib
--- Etapa 3C: Feature 'cluster' adicionada ao DataFrame 'publica' ---

--- Analisando Vari�veis Discriminantes (Drivers) dos Clusters (publica) ---
Treinando Random Forest para Feature Importance...
Tabela de import�ncia dos drivers salva em: reports\clustering\publica\cluster_drivers_importance_publica.csv
Gr�fico de drivers salvo em: reports\clustering\publica\figures\cluster_drivers_plot_publica.png
Gerando regras de decis�o simples (Decision Tree)...
Regras de decis�o (texto) salvas em: reports\clustering\publica\cluster_rules_publica.txt

--- Analisando Import�ncia Relativa (Z-Score) - PUBLICA ---
Heatmap AGREGADO de import�ncia relativa salvo em: reports\clustering\publica\figures\cluster_heatmap_relative_aggregated_publica.png
Heatmap DETALHADO de import�ncia relativa salvo em: reports\clustering\publica\figures\cluster_heatmap_relative_detailed_publica.png
--- Etapa 3D: Analisando Perfil dos Clusters (publica) ---

Distribui��o dos Clusters (publica):
cluster
0    10637
1     3698
2     8925
3    13541
4     1562
5     5249
Name: count, dtype: int64

--- Perfil Num�rico (M�dias) dos Clusters (publica) ---
         faixa_etaria  nu_carga_horaria  ...       igc  inscritos_por_vaga
cluster                                  ...                              
0            2.998496       3562.797123  ...  2.890556           10.641306
1            7.731206       3241.980800  ...  3.205281            8.321485
2            3.015462       3502.092885  ...  3.341146            5.633998
3            2.872018       3540.553356  ...  3.736453           10.025255
4            3.069782       8487.731754  ...  3.407233           68.652201
5            3.039817       3553.328062  ...  3.336229            8.136720

[6 rows x 7 columns]

--- Perfil Categ�rico (Moda) dos Clusters (publica) ---
         nu_ano_censo  ...  no_regiao_ies
cluster                ...               
0                2019  ...       Nordeste
1                2019  ...       Nordeste
2                2018  ...            Sul
3                2018  ...        Sudeste
4                2019  ...        Sudeste
5                2019  ...        Sudeste

[6 rows x 12 columns]
--- An�lise de Perfil (publica) conclu�da. Relat�rios salvos em 'reports\clustering\publica' ---
tp_cor_raca                        object
tp_sexo                              bool
faixa_etaria                      float64
in_financiamento_estudantil       float64
in_apoio_social                   float64
tp_escola_conclusao_ens_medio      object
sigla_uf_curso                     object
tp_grau_academico                  object
tp_modalidade_ensino               object
nu_carga_horaria                    int64
nm_categoria                       object
pib                                 int64
inscritos_por_vaga                float64
tp_categoria_administrativa        object
no_regiao_ies                      object
igc                               float64
duracao_ideal_anos                float64
taxa_integralizacao               float64
cluster                          category
dtype: object
Colunas num�ricas identificadas: ['tp_sexo', 'faixa_etaria', 'in_financiamento_estudantil', 'in_apoio_social', 'nu_carga_horaria', 'pib', 'inscritos_por_vaga', 'igc', 'duracao_ideal_anos']
Colunas categ�ricas identificadas (baixa cardinalidade): ['tp_cor_raca', 'tp_escola_conclusao_ens_medio', 'sigla_uf_curso', 'tp_grau_academico', 'tp_modalidade_ensino', 'nm_categoria', 'tp_categoria_administrativa', 'no_regiao_ies', 'cluster']
Colunas categ�ricas descartadas (alta cardinalidade): []

--- Divis�o Treino/Teste ---
Total de amostras restantes: 21853
Amostras para Treinamento (80%): 17482
Amostras para Teste (20%): 4371
Pr�-processamento conclu�do.
Salvando o pipeline de pr�-processamento em models\preprocessor_publica.joblib
publica
Iniciando o treinamento do modelo RandomForestRegressor...
Treinamento finalizado.
Salvando modelo em models\permanencia_model_publica.joblib
Mean Squared Error (MSE): 0.05
R-squared (R2): 0.78

--- Processando Dados para Institui��es do Tipo: PRIVADA ---
--- Etapa 3A: Pr�-processando dados para K-Prototypes (privada) ---
For�ando colunas conhecidas para 'category' em df_prep...
--- Etapa 3B: Treinando K-Prototypes (k=6) para 'privada' ---

Iniciando K-Prototypes com 6 clusters...
Clusteriza��o conclu�da.
Salvando modelo em models\kmeans_model_privada.joblib
--- Etapa 3C: Feature 'cluster' adicionada ao DataFrame 'privada' ---

--- Analisando Vari�veis Discriminantes (Drivers) dos Clusters (privada) ---
Treinando Random Forest para Feature Importance...
Tabela de import�ncia dos drivers salva em: reports\clustering\privada\cluster_drivers_importance_privada.csv
Gr�fico de drivers salvo em: reports\clustering\privada\figures\cluster_drivers_plot_privada.png
Gerando regras de decis�o simples (Decision Tree)...
Regras de decis�o (texto) salvas em: reports\clustering\privada\cluster_rules_privada.txt

--- Analisando Import�ncia Relativa (Z-Score) - PRIVADA ---
Heatmap AGREGADO de import�ncia relativa salvo em: reports\clustering\privada\figures\cluster_heatmap_relative_aggregated_privada.png
Heatmap DETALHADO de import�ncia relativa salvo em: reports\clustering\privada\figures\cluster_heatmap_relative_detailed_privada.png
--- Etapa 3D: Analisando Perfil dos Clusters (privada) ---

Distribui��o dos Clusters (privada):
cluster
0    10016
1     9350
2    18074
3     3200
4    21977
5    25804
Name: count, dtype: int64

--- Perfil Num�rico (M�dias) dos Clusters (privada) ---
         faixa_etaria  nu_carga_horaria  ...       igc  inscritos_por_vaga
cluster                                  ...                              
0            3.305112       3707.880891  ...  2.779555            1.862387
1            7.807807       3741.185241  ...  2.604738            1.977165
2            3.029711       3720.851721  ...  3.183543            1.772298
3            3.137812       8277.530000  ...  2.946456           10.072833
4            3.062201       3609.723939  ...  2.776520            2.459527
5            3.121648       3726.774066  ...  2.505767            1.636487

[6 rows x 7 columns]

--- Perfil Categ�rico (Moda) dos Clusters (privada) ---
         nu_ano_censo  ...  no_regiao_ies
cluster                ...               
0                2018  ...            Sul
1                2019  ...        Sudeste
2                2019  ...        Sudeste
3                2019  ...        Sudeste
4                2018  ...        Sudeste
5                2018  ...       Nordeste

[6 rows x 12 columns]
--- An�lise de Perfil (privada) conclu�da. Relat�rios salvos em 'reports\clustering\privada' ---
tp_cor_raca                        object
tp_sexo                              bool
faixa_etaria                      float64
in_financiamento_estudantil       float64
in_apoio_social                   float64
tp_escola_conclusao_ens_medio      object
sigla_uf_curso                     object
tp_grau_academico                  object
tp_modalidade_ensino               object
nu_carga_horaria                    int64
nm_categoria                       object
pib                                 int64
inscritos_por_vaga                float64
tp_categoria_administrativa        object
no_regiao_ies                      object
igc                               float64
duracao_ideal_anos                float64
taxa_integralizacao               float64
cluster                          category
dtype: object
Colunas num�ricas identificadas: ['tp_sexo', 'faixa_etaria', 'in_financiamento_estudantil', 'in_apoio_social', 'nu_carga_horaria', 'pib', 'inscritos_por_vaga', 'igc', 'duracao_ideal_anos']
Colunas categ�ricas identificadas (baixa cardinalidade): ['tp_cor_raca', 'tp_escola_conclusao_ens_medio', 'sigla_uf_curso', 'tp_grau_academico', 'tp_modalidade_ensino', 'nm_categoria', 'tp_categoria_administrativa', 'no_regiao_ies', 'cluster']
Colunas categ�ricas descartadas (alta cardinalidade): []

--- Divis�o Treino/Teste ---
Total de amostras restantes: 42983
Amostras para Treinamento (80%): 34386
Amostras para Teste (20%): 8597
Pr�-processamento conclu�do.
Salvando o pipeline de pr�-processamento em models\preprocessor_privada.joblib
privada
Iniciando o treinamento do modelo RandomForestRegressor...
Treinamento finalizado.
Salvando modelo em models\permanencia_model_privada.joblib
Mean Squared Error (MSE): 0.05
R-squared (R2): 0.61
Gr�fico de import�ncia das features combinado salvo em: reports\figures\feature_importance_combined.png

Gr�fico de import�ncia das features AGREGADO salvo em: reports\figures\feature_importance_agregada_RandomForest.png
Relat�rio de m�tricas salvo em: reports\model_performance_metrics.csv

--- Pipeline conclu�do com sucesso! ---


--- SAÍDA DE ERRO (STDERR) ---

INFO: Sistema de logging configurado. Logs salvos em: C:\Users\ktama\OneDrive\�rea de Trabalho\Lanem\RP2\RP2-G13\RP2-G13\logs\run_20251115_122912.log
INFO: Iniciando o script principal...
WARNING: Par�metro --skip-integration ativado. Carregando DataFrames de arquivos de amostra.
INFO: Dados p�blicos carregados: 43612 linhas.
INFO: Dados privados carregados: 88421 linhas.
INFO: An�lise Comparativa conclu�da.
INFO: [Clusteriza��o] Iniciando pr�-processamento K-Prototypes para 'publica'...
INFO: Colunas num�ricas (padronizadas): ['faixa_etaria', 'nu_carga_horaria', 'pib', 'inscritos_por_vaga', 'igc', 'duracao_ideal_anos']
INFO: Colunas categ�ricas (usadas como r�tulos): ['nu_ano_censo', 'tp_cor_raca', 'tp_sexo', 'in_financiamento_estudantil', 'in_apoio_social', 'tp_escola_conclusao_ens_medio', 'sigla_uf_curso', 'tp_grau_academico', 'tp_modalidade_ensino', 'nm_categoria', 'tp_categoria_administrativa', 'no_regiao_ies']
INFO: �ndices das colunas categ�ricas: [6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17]
INFO: [Clusteriza��o] Treinando K-Prototypes (k=6) para 'publica'...
INFO: [Clusteriza��o] Modelo K-Means salvo em 'kmeans_model_publica.joblib'.
INFO: [Clusteriza��o] Feature 'cluster' (k=6) adicionada ao DataFrame 'publica'.
INFO: [Clusteriza��o] Analisando drivers dos clusters para 'publica'...
INFO: [Clusteriza��o] Analisando import�ncia relativa (Z-Score) para 'publica'...
INFO: Colunas Num�ricas (input): ['faixa_etaria', 'nu_carga_horaria', 'pib', 'inscritos_por_vaga', 'igc', 'duracao_ideal_anos', 'taxa_integralizacao']
INFO: Colunas Categ�ricas (inferidas): ['sigla_uf_curso', 'tp_categoria_administrativa', 'tp_escola_conclusao_ens_medio', 'tp_modalidade_ensino', 'in_financiamento_estudantil', 'no_regiao_ies', 'nm_categoria', 'in_apoio_social', 'nu_ano_censo', 'tp_cor_raca', 'tp_grau_academico', 'tp_sexo']
INFO: Import�ncia relativa AGREGADA (num�ricas + categ�ricas agregadas) salva em: reports\clustering\publica\cluster_relative_importance_aggregated_publica.csv
INFO: Import�ncia relativa (num�ricas + categ�ricas OHE) salva em: reports\clustering\publica\cluster_relative_importance_full_publica.csv
INFO: Iniciando an�lise de perfil dos clusters para 'publica'...
INFO: Distribui��o dos clusters para 'publica':
cluster
0    10637
1     3698
2     8925
3    13541
4     1562
5     5249
INFO: Distribui��o salva em: reports\clustering\publica\cluster_distribution_publica.csv
INFO: Perfil Num�rico (M�dias) dos Clusters (publica):
         faixa_etaria  nu_carga_horaria           pib  duracao_ideal_anos  taxa_integralizacao       igc  inscritos_por_vaga
cluster                                                                                                                     
0            2.998496       3562.797123  1.980376e+08            4.459105             0.619301  2.890556           10.641306
1            7.731206       3241.980800  3.140128e+08            5.241347             0.790678  3.205281            8.321485
2            3.015462       3502.092885  2.901542e+08            8.827003             0.310788  3.341146            5.633998
3            2.872018       3540.553356  4.777255e+08            4.521933             0.612120  3.736453           10.025255
4            3.069782       8487.731754  6.008114e+08            6.780410             0.425770  3.407233           68.652201
5            3.039817       3553.328062  2.348259e+09            4.554487             0.574634  3.336229            8.136720
INFO: Perfil num�rico salvo em: reports\clustering\publica\cluster_profile_numeric_publica.csv
INFO: Perfil Categ�rico (Moda) dos Clusters (publica):
         nu_ano_censo  tp_cor_raca  tp_sexo  in_financiamento_estudantil  in_apoio_social  ...  tp_modalidade_ensino  tp_categoria_administrativa  sigla_uf_curso                       nm_categoria no_regiao_ies
cluster                                                                                    ...                                                                                                                    
0                2019          3.0      1.0                          8.0              0.0  ...                     1                            1              MA                           Educa��o      Nordeste
1                2019          3.0      2.0                          8.0              0.0  ...                     1                            1              BA                           Educa��o      Nordeste
2                2018          1.0      1.0                          8.0              0.0  ...                     1                            1              RS                           Educa��o           Sul
3                2018          1.0      2.0                          8.0              0.0  ...                     1                            1              MG  Engenharia, produ��o e constru��o       Sudeste
4                2019          1.0      1.0                          8.0              0.0  ...                     1                            1              MG                  Sa�de e bem-estar       Sudeste
5                2019          1.0      2.0                          8.0              0.0  ...                     1                            2              SP  Engenharia, produ��o e constru��o       Sudeste
INFO: Perfil categ�rico salvo em: reports\clustering\publica\cluster_profile_categorical_publica.csv
INFO: [Clusteriza��o] Iniciando pr�-processamento K-Prototypes para 'privada'...
INFO: Colunas num�ricas (padronizadas): ['faixa_etaria', 'nu_carga_horaria', 'pib', 'inscritos_por_vaga', 'igc', 'duracao_ideal_anos']
INFO: Colunas categ�ricas (usadas como r�tulos): ['nu_ano_censo', 'tp_cor_raca', 'tp_sexo', 'in_financiamento_estudantil', 'in_apoio_social', 'tp_escola_conclusao_ens_medio', 'sigla_uf_curso', 'tp_grau_academico', 'tp_modalidade_ensino', 'nm_categoria', 'tp_categoria_administrativa', 'no_regiao_ies']
INFO: �ndices das colunas categ�ricas: [6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17]
INFO: [Clusteriza��o] Treinando K-Prototypes (k=6) para 'privada'...
INFO: [Clusteriza��o] Modelo K-Means salvo em 'kmeans_model_privada.joblib'.
INFO: [Clusteriza��o] Feature 'cluster' (k=6) adicionada ao DataFrame 'privada'.
INFO: [Clusteriza��o] Analisando drivers dos clusters para 'privada'...
INFO: [Clusteriza��o] Analisando import�ncia relativa (Z-Score) para 'privada'...
INFO: Colunas Num�ricas (input): ['faixa_etaria', 'nu_carga_horaria', 'pib', 'inscritos_por_vaga', 'igc', 'duracao_ideal_anos', 'taxa_integralizacao']
INFO: Colunas Categ�ricas (inferidas): ['sigla_uf_curso', 'tp_categoria_administrativa', 'tp_escola_conclusao_ens_medio', 'tp_modalidade_ensino', 'in_financiamento_estudantil', 'no_regiao_ies', 'nm_categoria', 'in_apoio_social', 'nu_ano_censo', 'tp_cor_raca', 'tp_grau_academico', 'tp_sexo']
INFO: Import�ncia relativa AGREGADA (num�ricas + categ�ricas agregadas) salva em: reports\clustering\privada\cluster_relative_importance_aggregated_privada.csv
INFO: Import�ncia relativa (num�ricas + categ�ricas OHE) salva em: reports\clustering\privada\cluster_relative_importance_full_privada.csv
INFO: Iniciando an�lise de perfil dos clusters para 'privada'...
INFO: Distribui��o dos clusters para 'privada':
cluster
0    10016
1     9350
2    18074
3     3200
4    21977
5    25804
INFO: Distribui��o salva em: reports\clustering\privada\cluster_distribution_privada.csv
INFO: Perfil Num�rico (M�dias) dos Clusters (privada):
         faixa_etaria  nu_carga_horaria           pib  duracao_ideal_anos  taxa_integralizacao       igc  inscritos_por_vaga
cluster                                                                                                                     
0            3.305112       3707.880891  3.074813e+08            9.161841             0.287012  2.779555            1.862387
1            7.807807       3741.185241  8.958672e+08            4.877701             0.594967  2.604738            1.977165
2            3.029711       3720.851721  4.120983e+08            4.593338             0.523120  3.183543            1.772298
3            3.137812       8277.530000  8.383835e+08            6.504531             0.388828  2.946456           10.072833
4            3.062201       3609.723939  2.348269e+09            4.479388             0.503814  2.776520            2.459527
5            3.121648       3726.774066  3.510836e+08            4.634514             0.510761  2.505767            1.636487
INFO: Perfil num�rico salvo em: reports\clustering\privada\cluster_profile_numeric_privada.csv
INFO: Perfil Categ�rico (Moda) dos Clusters (privada):
         nu_ano_censo  tp_cor_raca  tp_sexo  in_financiamento_estudantil  in_apoio_social  ...  tp_modalidade_ensino  tp_categoria_administrativa  sigla_uf_curso                       nm_categoria no_regiao_ies
cluster                                                                                    ...                                                                                                                    
0                2018          1.0      1.0                          1.0              0.0  ...                     1                            5              RS  Neg�cios, administra��o e direito           Sul
1                2019          1.0      1.0                          1.0              0.0  ...                     1                            6              SP  Neg�cios, administra��o e direito       Sudeste
2                2019          1.0      1.0                          0.0              0.0  ...                     1                            6              MG  Neg�cios, administra��o e direito       Sudeste
3                2019          1.0      1.0                          0.0              0.0  ...                     1                            6              SP                  Sa�de e bem-estar       Sudeste
4                2018          1.0      1.0                          0.0              0.0  ...                     1                            6              SP  Neg�cios, administra��o e direito       Sudeste
5                2018          3.0      1.0                          1.0              0.0  ...                     1                            6              RJ  Neg�cios, administra��o e direito      Nordeste
INFO: Perfil categ�rico salvo em: reports\clustering\privada\cluster_profile_categorical_privada.csv
